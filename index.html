<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Isle of Arran</title>

 		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" />
		<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>
		<script src='https://unpkg.com/@turf/turf@6.3.0/turf.min.js'></script>

		<style>
      
      /* set the web page to full size */
			html, body {
				padding: 0;
				margin: 0;
				width: 100%;
				height: 100%;
			}

      /* set the map to full page */
			#map {
				width: 100%;
				height: 100%;
			}
		</style>
	</head>
	<body>
	<!-- A division to hold the map -->
		<div id='map'></div>

		<script>

			// this is a variable that holds the map
			const map = L.map('map');

			// this is a variable that holds the coordinates of the map centre
			const mapCentre = L.latLng(55.573605, -5.240179);

			// set the map to use the above coordinates, and to zoom level 16
			map.setView(mapCentre, 10);

			// this is a variable that holds a reference the tiles that will be used for the basemap
			const tiles = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {attribution: 'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'});

			//add the tiles to the map
			tiles.addTo(map);
			
			
			//Test geofence for Huttons unconformity 
			var point = turf.point([-5.289176, 55.715494]); 					// Create a turf point 
			var buffered = turf.buffer(point, 300, {units: 'meters'}); 		// Based on geofence research 
			var buffered2 = turf.buffer(point, 1, {units: 'miles'}); 
			L.geoJSON(buffered).addTo(map); 										// Polygon = buffer 
			L.geoJSON(buffered2).addTo(map);									// Add buffer to map as Leaflet geojson
			var markerhu = L.geoJSON(point).addTo(map); 
			markerhu.bindPopup("Hutton's unconformity").openPopup(); 
			
			
			//Test geofence for Corrie Sandstone
			var point = turf.point([-5.138701,55.640370]); 					// Create a turf point 
			var buffered = turf.buffer(point, 500, {units: 'meters'}); 		// Based on geofence research 
			var buffered2 = turf.buffer(point, 1, {units: 'miles'}); 
			L.geoJSON(buffered).addTo(map); 										// Polygon = buffer 
			L.geoJSON(buffered2).addTo(map);									// Add buffer to map as Leaflet geojson
			var markercs = L.geoJSON(point).addTo(map); 
			markercs.bindPopup("Corrie Sandstone").openPopup(); 
			
			//Goatfell 
			var point = turf.point([-5.192576, 55.623599]); 					// Create a turf point 
			var buffered = turf.buffer(point, 700, {units: 'meters'}); 		// Not sure about this one ???? 
			var buffered2 = turf.buffer(point, 1, {units: 'miles'}); 
			L.geoJSON(buffered).addTo(map); 										// Polygon = buffer 
			L.geoJSON(buffered2).addTo(map);									// Add buffer to map as Leaflet geojson
			var markerg = L.geoJSON(point).addTo(map);
			markerg.bindPopup("Goatfell").openPopup();
			
			//Kildonan dykes 
			var point = turf.point([-5.110211, 55.442576]); 					// Create a turf point 
			var buffered = turf.buffer(point, 300, {units: 'meters'}); 		// Based on geofence research 
			var buffered2 = turf.buffer(point, 1, {units: 'miles'}); 
			L.geoJSON(buffered).addTo(map); 										// Polygon = buffer 
			L.geoJSON(buffered2).addTo(map);									// Add buffer to map as Leaflet geojson
			var markerkd = L.geoJSON(point).addTo(map);
			markerkd.bindPopup("Kildonan Dykes").openPopup();
			
			
			//Drumadoon Sill 
			var point = turf.point([ -5.355160,55.506934]); 					// Create a turf point 
			var buffered = turf.buffer(point, 500, {units: 'meters'}); 		// Based on geofence research 
			var buffered2 = turf.buffer(point, 1, {units: 'miles'}); 
			L.geoJSON(buffered).addTo(map); 										// Polygon = buffer 
			L.geoJSON(buffered2).addTo(map);									// Add buffer to map as Leaflet geojson
			var markerds = L.geoJSON(point).addTo(map);
			markerds.bindPopup("Drumadoon Sill").openPopup();

			
			// Glen Rosa
			var point = turf.point([-5.187110, 55.599607]); 					// Create a turf point 
			var buffered = turf.buffer(point, 500, {units: 'meters'}); 		// This one overlaps with Goatfell 
			var buffered2 = turf.buffer(point, 1, {units: 'miles'}); 
			L.geoJSON(buffered).addTo(map); 										// Polygon = buffer 
			L.geoJSON(buffered2).addTo(map);									// Add buffer to map as Leaflet geojson
			var markergr = L.geoJSON(point).addTo(map);
			markergr.bindPopup("Glen Rosa").openPopup(); 
			
		</script>
	</body>
</html>
